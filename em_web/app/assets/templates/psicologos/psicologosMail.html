<!---------------------------------------------------------------------------------------------------------------------------------- BARRA DE NAVEGACION PSICOLOGO-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->

<nav class='container navbar-inverse' role='navigation' >
	<div class='navbar-header'>
		<a href='#/inicio' class='navbar-brand logo'>
			<img class="ui tiny avatar image" src="/assets/images/emozio_logo.png">Emozio
		</a>
		<button type='button' class='navbar-toggle collapsed' data-toggle='collapse' data-target='.navbar-collapse'>
			<span class='sr-only'>Toggle navigation</span>
			<span class='icon-bar'></span>
			<span class='icon-bar'></span>
			<span class='icon-bar'></span>
		</button>
	</div>

	<ul class='nav navbar-nav navbar-right collapse navbar-collapse'>
		<li><a href='#/inicio' class="navegacion">Inicio</a></li>
		<li><a href='#/mail' class="navegacion seleccionado">Mis solicitudes</a></li>
		<li class="dropdown navegacion">
			<a class="dropdown-toggle" data-toggle="dropdown" href="#/mail">Perfil
				<span class="caret"></span></a>
			<ul class="dropdown-menu navegacion_transparente">
				<li><a href="#/psicologos/{{psicologo._id}}">Cómo me ven</a></li>
				<li><a href='#/psicologos/modificar'>Modificar mis datos</a></li>
				<li class='divider'></li>
				<li><a ng-click="salir()">Salir</a></li>
			</ul>
		</li>
	</ul>
</nav>

<!---------------------------------------------------------------------------------------------------------------------------------- HACER EL TEST --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
<!--POP UP TOTORO-->
<!--https://semantic-ui.com/modules/popup.html#/definition -->
<!--TABLA-->
<!--https://semantic-ui.com/collections/table.html-->
<!--LISTA-->
<!--https://semantic-ui.com/elements/list.html-->
<!--AVISO MENSAJES PENDIENTES-->
<!--https://semantic-ui.com/elements/label.html-->

<!--NOTIFICACIONES INSTANTANEAS-->
<!--https://blog.fossasia.org/creating-a-notification-dropdown-in-semantic-ui-for-open-event-frontend/-->

<div class="container">
	<div class="row">
		<div class="col-xs-3">
			<div class="ui vertical menu">
				<a class="{{pendientes}}" ng-click="cambiarMenu(1)">Pendientes <div class="ui teal left pointing label">{{numMsjPendientes}}</div>
				</a>
				<a class="{{aceptadas}}" ng-click="cambiarMenu(2)">Aceptadas <div class="ui teal left pointing label">{{numMsjAceptados}}</div>
				</a>
				<a class="{{rechazadas}}" ng-click="cambiarMenu(3)">Rechazadas <div class="ui teal left pointing label">{{numMsjRechazados}}</div>
				</a>
			</div>
			<div ng-repeat="mensaje in mensajes">
				<div class="jumbotron"></div>
				<div class="jumbotron"></div>
			</div>
		</div>

<!--
		<div class="jumbotron" ng-show="sin_mensajes">
			<h3 class="sin_resultados">No hay solicitudes</h3>
		</div>
-->

		<div ng-repeat="mensaje in mensajes">

			<div class="col-xs-5">
				<div class="ui cards">
					<div class="ui fluid card">
						<div class="content" id="mensaje">
							<div class="ui orange top right attached label" ng-hide="mensaje.mensajePsicologo">Pendiente de respuesta</div>
							<div class="ui green top right attached label" ng-show="mensaje.acepta">Aceptada</div>
							<div class="ui red top right attached label" ng-show="mensaje.rechaza">Rechazada</div>
							<div class="meta"> {{mensaje.mensajePaciente.fecha}} </div>
							<h2 class="ui sub header">Mensaje </h2>
							<div class="description"> {{mensaje.mensajePaciente.texto}} </div>
							<h2 class="ui sub header">Preferencias </h2>
							<div class="description"> {{mensaje.mensajePaciente.preferencias}} </div>
							<br>
						</div>
						<div class="content" id="respuesta" ng-show="mensaje.mensajePsicologo">
							<div class="meta"> {{mensaje.mensajePsicologo.fecha}} </div>
							<h2 class="ui sub header">Respuesta </h2>
							<div class="description"> {{mensaje.mensajePsicologo.comentario}} </div>
							<h2 class="ui sub header" ng-hide="mensaje.rechaza">Cita </h2>
							<div class="description" ng-hide="mensaje.rechaza"> <i class="calendar icon"></i> {{mensaje.mensajePsicologo.fechaCita}} </div>
						</div>
						<div class="extra content" id="mensaje" ng-hide="mensaje.mensajePsicologo">
							<div class="ui two buttons">
								<button class="ui basic green button" ng-click="mensajeSeleccionado(mensaje)" data-target="#acepta_modal" data-toggle="modal">Aceptar</button>
								<button class="ui basic red button" ng-click="mensajeSeleccioando(mensaje)" data-target="#declina_modal" data-toggle="modal">Declinar</button>
							</div>
						</div>
					</div>
				</div>
				<div class="well"></div>
			</div>
			<div class="col-xs-3">
				<div class="ui cards">
					<div class="card">
						<div class="content">
							<div class="meta"> {{mensaje.paciente.genero}} </div>
							<div class="meta"> <i class="birthday icon"></i> {{mensaje.paciente.edad}} </div>
							<div class="meta"> <i class="marker icon"></i> {{mensaje.paciente.localizacion}} </div>
						</div>
						<div class="extra content">
							<h4 class="ui teal header">Diagnóstico</h4>
							<table class="ui very basic collapsing table">
								<!--
<thead>
<tr>
<th class="ui teal">Patología</th>
<th class="ui teal">%</th>
</tr>
</thead>
-->
								<tbody>
									<tr ng-repeat="diagnostico in mensaje.paciente.diagnostico" >
										<td id="tabla_diagnostico">
											<h5 class="ui header">{{diagnostico.patologia.nombre}} </h5>
										</td>
										<td id="tabla_diagnostico">
											<h5 class="ui header">{{diagnostico.porcentaje}}%</h5>
										</td>
									</tr>
								</tbody> 
							</table>
						</div>
						<div class="extra content" ng-show="mensaje.acepta">
							<!-- Datos ocultos -->
							<h4 class="ui teal header">Datos de contacto</h4>
							<p><i class="mail icon"></i> {{mensaje.paciente.email}}</p>
							<p><i class="call icon"></i> {{mensaje.paciente.telefono}}</p>
						</div>
					</div>
				</div>
				<div class="well"></div>
			</div>
		</div>
	</div>
</div>

<!-------------------------------------------------------------------------------------------------------------------------- FORMULARIO DE ACEPTAR LA CITA: Ventana emergente - overlay ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
<div class="ui container">
	<div class="modal fade" id="acepta_modal">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<!-- Titulo -->
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">Aceptar la cita</h4>
				</div>

				<!-- Cuerpo del formulario -->
				<div class="modal-body">
					<div class="ui form" id="acepta_form"> 
						<div class="required field"> 
							<label>Mensaje</label> 
							<textarea name="mensaje" rows="4" required class="form-control" placeholder="Escribe un mensaje" ng-model="mensaje.texto"></textarea> 
						</div>
						<div class="required field"> 
							<p><label>Dale una cita</label> <i class="help circle icon link" id="ayuda_cita" data-content="Pasos: 
								1. Selecciona el día del mes.
								2. Selecciona la hora. 
								3. Selecciona los minutos." data-variation="wide"></i></p>
							<div class="ui calendar" id="cita" name="cita">
								<div class="ui input left icon">
									<i class="calendar icon"></i>
									<input type="text" placeholder="Fecha y hora" ng-model="mensaje.fechaCita">
								</div>
							</div>
						</div> 
					</div>
					<div class="ui positive message" ng-show="msj_exito_contacto">
						<i class="close icon"></i>
						<div class="header"> Hemos enviado la cita al paciente. </div>
					</div>
				</div>

				<!--
<div class="col-xs-10 pull-left text-left text-muted"> 
<small><strong>Aviso:</strong>
Lorem ipsum dolor sit amet consectetur adipiscing elit. 
Mauris vitae libero lacus, vel hendrerit nisi! Maecenas quis 
velit nisl, volutpat viverra felis. Vestibulum luctus mauris 
sed sem dapibus luctus.</small> 
</div> 
-->

				<div class="modal-footer">
					<div class="ui green button" ng-click="enviarMensaje(mensaje)">Enviar</div>
					<div class="ui grey button"  class="close" data-dismiss="modal" aria-label="Close">Cancelar</div>
				</div>
			</div> 
		</div> 
	</div>
</div>

<!-------------------------------------------------------------------------------------------------------------------------- FORMULARIO DE DECLINAR LA CITA: Ventana emergente - overlay ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
<div class="ui container">
	<div class="modal fade" id="declina_modal">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<!-- Titulo -->
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">Declinar la cita</h4>
				</div>

				<!-- Cuerpo del formulario -->
				<div class="modal-body">
					<div class="ui form" id="rechaza_form"> 
						<div class="required field"> 
							<label>Motivo</label> 
							<textarea name="mensaje" rows="4" required class="form-control" placeholder="Escribe un mensaje" ng-model="mensaje.texto"></textarea> 
						</div>
					</div>
					<div class="ui positive message" ng-show="msj_exito_contacto">
						<i class="close icon"></i>
						<div class="header"> Hemos enviado el mensaje al paciente. </div>
					</div>
				</div>

				<!--
<div class="col-xs-10 pull-left text-left text-muted"> 
<small><strong>Aviso:</strong>
Lorem ipsum dolor sit amet consectetur adipiscing elit. 
Mauris vitae libero lacus, vel hendrerit nisi! Maecenas quis 
velit nisl, volutpat viverra felis. Vestibulum luctus mauris 
sed sem dapibus luctus.</small> 
</div> 
-->

				<div class="modal-footer">
					<div class="ui green button" ng-click="enviarRechazo(mensaje)">Enviar</div>
					<div class="ui grey button"  class="close" data-dismiss="modal" aria-label="Close">Cancelar</div>
				</div>
			</div> 
		</div> 
	</div>
</div>

<!--
<div class="container">
<div class="row">
<div class="col-sm-3 col-md-2">
<div class="btn-group">
<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
Mail <span class="caret"></span>
</button>
<ul class="dropdown-menu" role="menu">
<li><a href="#">Mail</a></li>
<li><a href="#">Contacts</a></li>
<li><a href="#">Tasks</a></li>
</ul>
</div>
</div>
<div class="col-sm-9 col-md-10">
<div class="btn-group">
<button type="button" class="btn btn-default">
<div class="checkbox" style="margin: 0;">
<label>
<input type="checkbox">
</label>
</div>
</button>
<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
<span class="caret"></span><span class="sr-only">Toggle Dropdown</span>
</button>
<ul class="dropdown-menu" role="menu">
<li><a href="#">All</a></li>
<li><a href="#">None</a></li>
<li><a href="#">Read</a></li>
<li><a href="#">Unread</a></li>
<li><a href="#">Starred</a></li>
<li><a href="#">Unstarred</a></li>
</ul>
</div>
<button type="button" class="btn btn-default" data-toggle="tooltip" title="Refresh">
<span class="glyphicon glyphicon-refresh"></span>   </button>
<div class="btn-group">
<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
More <span class="caret"></span>
</button>
<ul class="dropdown-menu" role="menu">
<li><a href="#">Mark all as read</a></li>
<li class="divider"></li>
<li class="text-center"><small class="text-muted">Select messages to see more actions</small></li>
</ul>
</div>
<div class="pull-right">
<span class="text-muted"><b>1</b>–<b>50</b> of <b>277</b></span>
<div class="btn-group btn-group-sm">
<button type="button" class="btn btn-default">
<span class="glyphicon glyphicon-chevron-left"></span>
</button>
<button type="button" class="btn btn-default">
<span class="glyphicon glyphicon-chevron-right"></span>
</button>
</div>
</div>
</div>
</div>
<hr />
<div class="row">
<div class="col-sm-3 col-md-2">
<a href="#" class="btn btn-danger btn-sm btn-block" role="button">COMPOSE</a>
<hr />
<ul class="nav nav-pills nav-stacked">
<li class="active"><a href="#"><span class="badge pull-right">42</span> Inbox </a>
</li>
<li><a href="http://www.jquery2dotnet.com">Starred</a></li>
<li><a href="http://www.jquery2dotnet.com">Important</a></li>
<li><a href="http://www.jquery2dotnet.com">Sent Mail</a></li>
<li><a href="http://www.jquery2dotnet.com"><span class="badge pull-right">3</span>Drafts</a></li>
</ul>
</div>
<div class="col-sm-9 col-md-10">
<ul class="nav nav-tabs">
<li class="active"><a href="#home" data-toggle="tab"><span class="glyphicon glyphicon-inbox">
</span>Primary</a></li>
<li><a href="#profile" data-toggle="tab"><span class="glyphicon glyphicon-user"></span>
Social</a></li>
<li><a href="#messages" data-toggle="tab"><span class="glyphicon glyphicon-tags"></span>
Promotions</a></li>
<li><a href="#settings" data-toggle="tab"><span class="glyphicon glyphicon-plus no-margin">
</span></a></li>
</ul>
<div class="tab-content">
<div class="tab-pane fade in active" id="home">
<div class="list-group">
<a href="#" class="list-group-item">
<div class="checkbox">
<label>
<input type="checkbox">
</label>
</div>
<span class="glyphicon glyphicon-star-empty"></span><span class="name" style="min-width: 120px;
display: inline-block;">Bhaumik Patel</span> <span class="">This is big title</span>
<span class="text-muted" style="font-size: 11px;">- Hi hello how r u ?</span> <span
class="badge">12:10 AM</span> <span class="pull-right"><span class="glyphicon glyphicon-paperclip">
</span></span></a><a href="#" class="list-group-item">
<div class="checkbox">
<label>
<input type="checkbox">
</label>
</div>
<span class="glyphicon glyphicon-star-empty"></span><span class="name" style="min-width: 120px;
display: inline-block;">Bhaumik Patel</span> <span class="">This is big title</span>
<span class="text-muted" style="font-size: 11px;">- Hi hello how r u ?</span> <span
class="badge">12:10 AM</span> <span class="pull-right"><span class="glyphicon glyphicon-paperclip">
</span></span></a><a href="#" class="list-group-item read">
<div class="checkbox">
<label>
<input type="checkbox">
</label>
</div>
<span class="glyphicon glyphicon-star"></span><span class="name" style="min-width: 120px;
display: inline-block;">Bhaumik Patel</span> <span class="">This is big title</span>
<span class="text-muted" style="font-size: 11px;">- Hi hello how r u ?</span> <span
class="badge">12:10 AM</span> <span class="pull-right"><span class="glyphicon glyphicon-paperclip">
</span></span></a>
</div>
</div>
<div class="tab-pane fade in" id="profile">
<div class="list-group">
<div class="list-group-item">
<span class="text-center">This tab is empty.</span>
</div>
</div>
</div>
<div class="tab-pane fade in" id="messages">
...</div>
<div class="tab-pane fade in" id="settings">
This tab is empty.</div>
</div>
<div class="row-md-12">
<div class="ad">
<a href="http://www.jquery2dotnet.com" class="title">jQuery2DotNet</a>
<div>
Cool jQuery, CSS3, HTML5, Bootstrap, and MVC tutorial</div>
<a href="http://www.jquery2dotnet.com" class="url">www.jquery2dotnet.com</a>
</div>
</div>
</div>
</div>
</div>
-->
